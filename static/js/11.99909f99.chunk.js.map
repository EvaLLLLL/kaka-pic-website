{"version":3,"sources":["components/Tips.js","components/Uploader.js","pages/Home.js"],"names":["Tips","styled","div","StyledNavLink","NavLink","Component","observer","props","UserStore","useStores","currentUser","children","to","Meta","Card","ClipboardJS","Button","button","Link","a","Result","H1","h1","ImageStore","Dragger","Upload","store","useRef","useLocalStore","width","setWidth","height","setHeight","serverFile","attributes","url","widthStr","heightStr","showUploadList","beforeUpload","file","setFile","setFilename","name","message","warning","test","type","size","error","upLoad","then","console","dir","log","catch","tip","spinning","isUploading","className","InboxOutlined","style","cover","alt","src","actions","data-clipboard-text","href","target","title","filename","description","Home","Uploader"],"mappings":"okBAMA,IAAMA,EAAOC,IAAOC,IAAV,KAWJC,EAAgBF,YAAOG,IAAPH,CAAH,KAMbI,EAAYC,aAAS,SAACC,GAAW,IAC/BC,EAAaC,cAAbD,UAEP,OACC,oCAEEA,EAAUE,YAAc,KACvB,kBAACV,EAAD,KACEO,EAAMI,SACP,kBAACR,EAAD,CAAeS,GAAG,UAAlB,2BAOSP,O,wxBC/BRQ,EAAQC,IAARD,KACP,IAAIE,IAAY,QAEhB,IAAMC,EAASf,IAAOgB,OAAV,KAUNC,EAAOjB,IAAOkB,EAAV,KAKJC,EAASnB,IAAOC,IAAV,KASNmB,EAAKpB,IAAOqB,GAAV,KA0GOjB,EArGGC,aAAS,WAAO,IAAD,EACAG,cAAzBc,EADyB,EACzBA,WAAYf,EADa,EACbA,UACZgB,EAAWC,IAAXD,QAIDE,GAHWC,mBACCA,mBAEJC,aAAc,iBAAO,CAClCC,MAAO,KACPC,SAFkC,SAEzBD,GACRH,EAAMG,MAAQA,GAEf,eACC,OAAOH,EAAMG,MAAN,aAAoBH,EAAMG,OAAU,IAE5CE,OAAQ,KACRC,UATkC,SASxBD,GACTL,EAAMK,OAASA,GAEhB,gBACC,OAAOL,EAAMK,OAAN,aAAqBL,EAAMK,QAAW,IAE9C,cACC,OAAOR,EAAWU,WAAWC,WAAWC,IAAID,WAAWC,IAAM,gBAAkBT,EAAMU,SAAWV,EAAMW,gBAYlG9B,EAAQ,CACb+B,gBAAgB,EAChBC,aAAc,SAACC,GAGd,OAFAjB,EAAWkB,QAAQD,GACnBjB,EAAWmB,YAAYF,EAAKG,MACE,OAA1BnC,EAAUE,aACbkC,IAAQC,QAAQ,qDACT,GAEH,wCAAwCC,KAAKN,EAAKO,MAInDP,EAAKQ,KAAO,SACfJ,IAAQK,MAAM,mEACP,IAER1B,EAAW2B,SACTC,MAAK,SAAClB,GACNmB,QAAQC,IAAIpB,GACZmB,QAAQE,IAAI,+BAEZC,OAAM,WACNH,QAAQH,MAAM,gCAET,IAfNL,IAAQK,MAAM,sFACP,KAkBV,OACC,kBAAC,IAAD,CAAMO,IAAI,qBAAMC,SAAUlC,EAAWmC,aACpC,kBAAClC,EAAYjB,EACZ,uBAAGoD,UAAU,wBACZ,kBAACC,EAAA,EAAD,OAED,uBAAGD,UAAU,mBAAb,+FACA,uBAAGA,UAAU,mBAAb,6FAIApC,EAAWU,WACX,kBAACb,EAAD,KACC,kBAACC,EAAD,iCACA,kBAAC,IAAD,CACCwC,MAAO,CAAChC,MAAO,KACfiC,MACC,yBACCC,IAAI,MACJC,IAAKzC,EAAWU,WAAWC,WAAWC,IAAID,WAAWC,MAGvD8B,QAAS,CACR,kBAACjD,EAAD,CAAQ2C,UAAU,MACVO,sBAAqB3C,EAAWU,WAAWC,WAAWC,IAAID,WAAWC,KAD7E,4BAEA,kBAACjB,EAAD,CAAMiD,KAAM5C,EAAWU,WAAWC,WAAWC,IAAID,WAAWC,IAAKiC,OAAO,UAAxE,8BAED,kBAACvD,EAAD,CACCwD,MAAO9C,EAAW+C,SAClBC,YAAahD,EAAWU,WAAWC,WAAWC,IAAID,WAAWC,QAI7D,S,SCnIDqC,EAAOlE,aAAS,WACrB,OACC,oCACC,wDACA,kBAACN,EAAA,EAAD,sDACA,kBAACyE,EAAD,UAKYD","file":"static/js/11.99909f99.chunk.js","sourcesContent":["import React from 'react'\r\nimport {useStores} from '../stores'\r\nimport {observer} from 'mobx-react'\r\nimport styled from 'styled-components'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\nconst Tips = styled.div`\r\n  background: orange;\r\n  padding: 10px;\r\n  margin: 30px 0;\r\n  color: #fff;\r\n  font-weight: bold;\r\n  border-radius: 4px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`\r\nconst StyledNavLink = styled(NavLink)`\r\n\tmargin-left: 15px;\r\n\tcolor: #1790ff;\r\n\tborder-bottom: 1px solid #1790ff;\r\n`\r\n\r\nconst Component = observer((props) => {\r\n\tconst {UserStore} = useStores()\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{\r\n\t\t\t\tUserStore.currentUser ? null :\r\n\t\t\t\t\t<Tips>\r\n\t\t\t\t\t\t{props.children}\r\n\t\t\t\t\t\t<StyledNavLink to=\"/login\">去登录</StyledNavLink>\r\n\t\t\t\t\t</Tips>\r\n\t\t\t}\r\n\t\t</>\r\n\t)\r\n})\r\n\r\nexport default Component\r\n","import React, {useRef} from 'react'\nimport {useStores} from '../stores'\nimport {observer, useLocalStore} from 'mobx-react'\nimport {Upload, message, Spin, Card} from 'antd'\nimport {InboxOutlined} from '@ant-design/icons'\nimport styled from 'styled-components'\nimport ClipboardJS from 'clipboard'\n\nconst {Meta} = Card\nnew ClipboardJS('.btn')\n\nconst Button = styled.button`\n\tbackground: none;\n\tmargin: 5px;\n\tpadding: 0;\n\tfont-size: 14px;\n\tborder: none;\n\tcursor: pointer;\n\toutline: none;\n`\n\nconst Link = styled.a`\n\tfont-size: 14px;\n\tmargin: 5px;\n`\n\nconst Result = styled.div`\n  margin-top: 30px;\n  border: 1px dashed #ccc;\n  padding: 20px;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n`\n\nconst H1 = styled.h1`\n  margin: 20px 0;\n  text-align: center;\n`\n\nconst Component = observer(() => {\n\tconst {ImageStore, UserStore} = useStores()\n\tconst {Dragger} = Upload\n\tconst refWidth = useRef()\n\tconst refHeight = useRef()\n\t\n\tconst store = useLocalStore(() => ({\n\t\twidth: null,\n\t\tsetWidth(width) {\n\t\t\tstore.width = width\n\t\t},\n\t\tget widthStr() {\n\t\t\treturn store.width ? `/w/${store.width}` : ''\n\t\t},\n\t\theight: null,\n\t\tsetHeight(height) {\n\t\t\tstore.height = height\n\t\t},\n\t\tget heightStr() {\n\t\t\treturn store.height ? `/h/${store.height}` : ''\n\t\t},\n\t\tget fullStr() {\n\t\t\treturn ImageStore.serverFile.attributes.url.attributes.url + '?imageView2/0' + store.widthStr + store.heightStr\n\t\t}\n\t}))\n\t\n\tconst bindWidthChange = () => {\n\t\tstore.setWidth(refWidth.current.value)\n\t}\n\t\n\tconst bindHeightChange = () => {\n\t\tstore.setHeight(refHeight.current.value)\n\t}\n\t\n\tconst props = {\n\t\tshowUploadList: false,\n\t\tbeforeUpload: (file) => {\n\t\t\tImageStore.setFile(file)\n\t\t\tImageStore.setFilename(file.name)\n\t\t\tif (UserStore.currentUser === null) {\n\t\t\t\tmessage.warning('请先登录再上传！')\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif (!/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/ig.test(file.type)) {\n\t\t\t\tmessage.error('只能上传 png/svg/jpg/jpeg/gif格式的图片！')\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif (file.size > 1024 * 1024) {\n\t\t\t\tmessage.error('只能上传小于1M的文件！')\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tImageStore.upLoad()\n\t\t\t\t.then((serverFile) => {\n\t\t\t\t\tconsole.dir(serverFile)\n\t\t\t\t\tconsole.log('上传成功')\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tconsole.error('上传失败')\n\t\t\t\t})\n\t\t\treturn false\n\t\t},\n\t}\n\t\n\treturn (\n\t\t<Spin tip=\"上传中\" spinning={ImageStore.isUploading}>\n\t\t\t<Dragger {...props}>\n\t\t\t\t<p className=\"ant-upload-drag-icon\">\n\t\t\t\t\t<InboxOutlined/>\n\t\t\t\t</p>\n\t\t\t\t<p className=\"ant-upload-text\">点击选择/拖拽文件至此处进行上传</p>\n\t\t\t\t<p className=\"ant-upload-hint\">\n\t\t\t\t\t仅支持png/svg/jpg/jpeg/gif格式，文件大小≤1M\n\t\t\t\t</p>\n\t\t\t</Dragger>\n\t\t\t{ImageStore.serverFile ? (\n\t\t\t\t<Result>\n\t\t\t\t\t<H1>上传结果</H1>\n\t\t\t\t\t<Card\n\t\t\t\t\t\tstyle={{width: 300}}\n\t\t\t\t\t\tcover={\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\talt=\"img\"\n\t\t\t\t\t\t\t\tsrc={ImageStore.serverFile.attributes.url.attributes.url}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t<Button className=\"btn\"\n\t\t\t\t\t\t\t        data-clipboard-text={ImageStore.serverFile.attributes.url.attributes.url}>复制链接</Button>,\n\t\t\t\t\t\t\t<Link href={ImageStore.serverFile.attributes.url.attributes.url} target=\"_blank\">点击查看</Link>\n\t\t\t\t\t\t]}>\n\t\t\t\t\t\t<Meta\n\t\t\t\t\t\t\ttitle={ImageStore.filename}\n\t\t\t\t\t\t\tdescription={ImageStore.serverFile.attributes.url.attributes.url}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Card>\n\t\t\t\t</Result>\n\t\t\t) : null}\n\t\t</Spin>\n\t)\n})\n\nexport default Component\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport Uploader from \"../components/Uploader\";\nimport Tips from \"../components/Tips\";\n\nconst Home = observer(() => {\n\treturn (\n\t\t<>\n\t\t\t<h1>上传图片</h1>\n\t\t\t<Tips>请先登录再上传!!!</Tips>\n\t\t\t<Uploader />\n\t\t</>\n\t);\n});\n\nexport default Home;\n"],"sourceRoot":""}