{"version":3,"sources":["pages/Register.js"],"names":["Wrapper","styled","div","Title","h1","layout","labelCol","span","wrapperCol","tailLayout","offset","Component","AuthStore","useStores","history","useHistory","name","onFinish","values","setUsername","username","setPassword","password","register","then","alert","push","catch","console","log","onFinishFailed","errorInfo","Item","label","rules","required","message","validator","rule","value","test","Promise","reject","length","resolve","min","max","Password","getFieldValue","type","htmlType"],"mappings":"khBAMA,IAAMA,EAAUC,IAAOC,IAAV,KAMPC,EAAQF,IAAOG,GAAV,KAMLC,EAAS,CACdC,SAAU,CACTC,KAAM,GAEPC,WAAY,CACXD,KAAM,KAGFE,EAAa,CAClBD,WAAY,CACXE,OAAQ,EACRH,KAAM,KA+GOI,UA3GG,WAAO,IACjBC,EAAaC,cAAbD,UACDE,EAAUC,cAmChB,OACC,kBAACf,EAAD,KACC,kBAACG,EAAD,qBACA,kBAAC,IAAD,iBACKE,EADL,CAECW,KAAK,QACLC,SAvCc,SAACC,GACjBN,EAAUO,YAAYD,EAAOE,UAC7BR,EAAUS,YAAYH,EAAOI,UAC7BV,EAAUW,WACRC,MAAK,WACLC,MAAM,4BACNX,EAAQY,KAAK,QAEbC,OAAM,WACNC,QAAQC,IAAI,gCA+BZC,eA3BoB,SAACC,GACvBH,QAAQC,IAAI,UAAWE,MA4BrB,kBAAC,IAAKC,KAAN,CACCC,MAAM,qBACNjB,KAAK,WACLkB,MAAO,CACN,CACCC,UAAU,EACVC,QAAS,wCAEV,CACCC,UAlCmB,SAACC,EAAMC,GAE/B,OADAX,QAAQC,IAAIS,EAAMC,GACd,KAAKC,KAAKD,GACNE,QAAQC,OAAO,oGACnBH,EAAMI,OAAS,EAAUF,QAAQC,OAAO,wEACxCH,EAAMI,OAAS,GAAWF,QAAQC,OAAO,yEACtCD,QAAQG,cAgCZ,kBAAC,IAAD,OAGD,kBAAC,IAAKZ,KAAN,CACCC,MAAM,eACNjB,KAAK,WACLkB,MAAO,CACN,CACCC,UAAU,EACVC,QAAS,kCAEV,CACCS,IAAK,EACLT,QAAS,iDAEV,CACCU,IAAK,GACLV,QAAS,wCAIX,kBAAC,IAAMW,SAAP,OAGD,kBAAC,IAAKf,KAAN,CACCC,MAAM,2BACNjB,KAAK,kBACLkB,MAAO,CACN,CACCC,UAAU,EACVC,QAAS,kCA3DS,SAAC,GAAD,IAAEY,EAAF,EAAEA,cAAF,MAAsB,CAC7CX,UAD6C,SACnCC,EAAMC,GACf,OAAIS,EAAc,cAAgBT,EAAcE,QAAQG,UACjDH,QAAQC,OAAO,mDA6DpB,kBAAC,IAAMK,SAAP,OAGD,kBAAC,IAAKf,KAASvB,EACd,kBAAC,IAAD,CAAQwC,KAAK,UAAUC,SAAS,UAAhC","file":"static/js/13.c2ad069e.chunk.js","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\nimport {Form, Input, Button} from 'antd'\nimport {useStores} from '../stores'\nimport {useHistory} from 'react-router-dom'\n\nconst Wrapper = styled.div`\n  max-width: 600px;\n  margin: 30px auto;\n  border: 2px solid #eee;\n  border-radius: 20px;\n`\nconst Title = styled.h1`\n\tpadding: 10px;\n  text-align: center;\n  margin-bottom: 30px;\n  border-bottom: 2px dashed #eee;\n`\nconst layout = {\n\tlabelCol: {\n\t\tspan: 8,\n\t},\n\twrapperCol: {\n\t\tspan: 12,\n\t},\n}\nconst tailLayout = {\n\twrapperCol: {\n\t\toffset: 8,\n\t\tspan: 12,\n\t},\n}\n\nconst Component = () => {\n\tconst {AuthStore} = useStores()\n\tconst history = useHistory()\n\t\n\tconst onFinish = (values) => {\n\t\tAuthStore.setUsername(values.username)\n\t\tAuthStore.setPassword(values.password)\n\t\tAuthStore.register()\n\t\t\t.then(() => {\n\t\t\t\talert('注册成功')\n\t\t\t\thistory.push('/')\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tconsole.log('注册失败')\n\t\t\t})\n\t}\n\t\n\tconst onFinishFailed = (errorInfo) => {\n\t\tconsole.log('Failed:', errorInfo)\n\t}\n\t\n\tconst validateUsername = (rule, value) => {\n\t\tconsole.log(rule, value)\n\t\tif (/\\W/.test(value))\n\t\t\treturn Promise.reject('不能出现字母数字下划线以外的字符')\n\t\tif (value.length < 3) return Promise.reject('用户名字符长度不能小于 3')\n\t\tif (value.length > 10) return Promise.reject('用户名字符长度不能大于 10')\n\t\treturn Promise.resolve()\n\t}\n\t\n\tconst validateConfirm = ({getFieldValue}) => ({\n\t\tvalidator(rule, value) {\n\t\t\tif (getFieldValue('password') === value) return Promise.resolve()\n\t\t\treturn Promise.reject('两次密码不一致')\n\t\t},\n\t})\n\t\n\treturn (\n\t\t<Wrapper>\n\t\t\t<Title>注册</Title>\n\t\t\t<Form\n\t\t\t\t{...layout}\n\t\t\t\tname=\"basic\"\n\t\t\t\tonFinish={onFinish}\n\t\t\t\tonFinishFailed={onFinishFailed}\n\t\t\t>\n\t\t\t\t<Form.Item\n\t\t\t\t\tlabel=\"用户名\"\n\t\t\t\t\tname=\"username\"\n\t\t\t\t\trules={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: '请输入用户名',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalidator: validateUsername,\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<Input/>\n\t\t\t\t</Form.Item>\n\t\t\t\t\n\t\t\t\t<Form.Item\n\t\t\t\t\tlabel=\"密码\"\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\trules={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: '请输入密码',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmin: 4,\n\t\t\t\t\t\t\tmessage: '至少需要 4 个字符',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmax: 10,\n\t\t\t\t\t\t\tmessage: '最长 10 个字符',\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<Input.Password/>\n\t\t\t\t</Form.Item>\n\t\t\t\t\n\t\t\t\t<Form.Item\n\t\t\t\t\tlabel=\"确认密码\"\n\t\t\t\t\tname=\"confirmPassword\"\n\t\t\t\t\trules={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: '请输入密码',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tvalidateConfirm,\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<Input.Password/>\n\t\t\t\t</Form.Item>\n\t\t\t\t\n\t\t\t\t<Form.Item {...tailLayout}>\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\">\n\t\t\t\t\t\t注册\n\t\t\t\t\t</Button>\n\t\t\t\t</Form.Item>\n\t\t\t</Form>\n\t\t</Wrapper>\n\t)\n}\n\nexport default Component\n"],"sourceRoot":""}